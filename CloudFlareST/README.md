# CloudflareST 測速工具使用指南

## 概述
CloudflareST 是一款用於測試 Cloudflare 服務延遲和下載速度的工具。使用該工具前，請確保關閉代理軟件，否則測速結果可能會不準確。若在路由器上運行，也請關閉或排除代理。

## 注意事項
1. **首次測速**: 電腦開機後第一次測速延遲可能會明顯偏高，建議開機後隨便測幾個 IP 再進行正式測速。
2. **代理設置**: 測速前請關閉所有代理軟件，路由器內的代理也需關閉或排除。

## 文件說明
- **IPV4.bat**: 用於 IPv4 測速的批處理文件。
- **IPV6.bat**: 用於 IPv6 測速的批處理文件。
- **IPV4.txt**: 儲存 IPv4 數據的文件。
- **IPV6.txt**: 儲存 IPv6 數據的文件。

## 參數說明

### 基本參數
- `-n 200`: 設置延遲測速線程數，默認 200，最大值 1000。
- `-t 4`: 設置單個 IP 的延遲測速次數，默認 4 次。
- `-dn 10`: 設置下載測速的 IP 數量，默認 10 個。
- `-dt 10`: 設置單個 IP 的下載測速時間（秒），默認 10 秒。
- `-tp 443`: 設置測速端口，默認 443。
- `-url https://cf.xiu2.xyz/url`: 設置測速地址，默認地址為 `https://cf.xiu2.xyz/url`。

### 模式設置
- `-httping`: 切換延遲測速模式為 HTTP 協議，默認為 TCPing 模式。
- `-httping-code 200`: 設置 HTTPing 延遲測速的有效 HTTP 狀態碼，默認為 200, 301, 302。
- `-cfcolo HKG, KHH, NRT, LAX, SEA, SJC, FRA, MAD`: 指定測速地區，僅 HTTPing 模式可用，默認為所有地區。

### 延遲和丟包設置
- `-tl 200`: 設置平均延遲上限（毫秒），只輸出低於指定平均延遲的 IP，默認 9999 ms。
- `-tll 40`: 設置平均延遲下限（毫秒），只輸出高於指定平均延遲的 IP，默認 0 ms。
- `-tlr 0.2`: 設置丟包率上限，只輸出低於或等於指定丟包率的 IP，範圍 0.00 ~ 1.00，默認 1.00。

### 下載速度設置
- `-sl 5`: 設置下載速度下限（Mbps），只輸出高於指定下載速度的 IP，默認 0.00 Mbps。
- `-p 10`: 設置顯示結果數量，默認 10 個，為 0 時不顯示結果直接退出。

### 文件和 IP 段設置
- `-f ip.txt`: 指定 IP 段數據文件，默認 `ip.txt`。
- `-ip 1.1.1.1,2.2.2.2/24,2606:4700::/32`: 指定要測速的 IP 段數據，英文逗號分隔。
- `-o result.csv`: 設置結果文件路徑，默認 `result.csv`，若路徑含有空格請加上引號。

### 其他設置
- `-dd`: 禁用下載測速，禁用後測速結果按延遲排序，默認啟用。
- `-allip`: 測速所有 IP，僅支持 IPv4，默認每個 /24 段隨機測速一個 IP。
- `-v`: 打印程序版本並檢查更新。
- `-h`: 打印幫助說明。

## 範例使用

1. 測速 200 個 IP，單個 IP 測速 4 次，下載 10 個延遲最低的 IP，測速時間 10 秒，端口 443：
   ```
   CloudflareST.exe -n 200 -t 4 -dn 10 -dt 10 -tp 443
   ```

2. 使用 HTTPing 模式測速，地區為 HKG, KHH, NRT：
   ```
   CloudflareST.exe -httping -cfcolo HKG,KHH,NRT
   ```

3. 設置延遲上限 200 ms，丟包率上限 0.2，顯示 10 個結果，保存到 `result.csv`：
   ```
   CloudflareST.exe -tl 200 -tlr 0.2 -p 10 -o result.csv
   ```

使用以上參數進行測速，可以根據需要調整不同設置以獲得最佳結果。
